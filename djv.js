!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.djv=e():t.djv=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=22)}([function(t,e,r){"use strict";function n(t){return(t||"").replace(/#/g,"")}function o(t,e,r){return"function"!=typeof t?t:t(e,r)}t.exports={cleanId:n,asExpression:o}},function(t,e,r){"use strict";t.exports={alpha:"!/^[a-zA-Z]+$/.test(%s)",alphanumeric:"!/^[a-zA-Z0-9]+$/.test(%s)",identifier:"!/^[-_a-zA-Z0-9]+$/.test(%s)",hexadecimal:"!/^[a-fA-F0-9]+$/.test(%s)",numeric:"!/^[0-9]+$/.test(%s)","date-time":"isNaN(Date.parse(%s)) || ~%s.indexOf('/')",uppercase:"%s !== %s.toUpperCase()",lowercase:"%s !== %s.toLowerCase()",hostname:"%s.length >= 256 || !/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])(\\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9]))*$/.test(%s)",uri:"!/[-a-zA-Z0-9@:%_\\+.~#?&//=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?/.test(%s)",email:"!/^[^@]+@[^@]+\\.[^@]+$/.test(%s)",ipv4:'!/^(\\d?\\d?\\d){0,255}\\.(\\d?\\d?\\d){0,255}\\.(\\d?\\d?\\d){0,255}\\.(\\d?\\d?\\d){0,255}$/.test($1) || $1.split(".")[3] > 255',ipv6:"!/^((?=.*::)(?!.*::.+::)(::)?([\\dA-F]{1,4}:(:|\\b)|){5}|([\\dA-F]{1,4}:){6})((([\\dA-F]{1,4}((?!\\3)::|:\\b|$))|(?!\\2\\3)){2}|(((2[0-4]|1\\d|[1-9])?\\d|25[0-5])\\.?\\b){4})$/.test(%s)"}},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var i=void 0;return r.lines.push(t.replace(/%i/g,function(){return"i"}).replace(/\$(\d)/g,function(t,e){return""+n[e-1]}).replace(/(%[sd])/g,function(){return n.length&&(i=n.shift()),""+i})),r}function n(){return this.join(".").replace(/\.\[/g,"[")}var o="function"==typeof e.errorHandler?e.errorHandler:function(t){return'return "'+t+": "+r.data+'";'};return Object.assign(r,{cachedIndex:0,cached:[],cache:function(t){var e=r.cached[r.cached.length-1];return e[t]?"i"+e[t]:(r.cachedIndex+=1,e[t]=r.cachedIndex,"(i"+e[t]+" = "+t+")")},data:["data"],error:o,lines:[],push:r,resolve:function(e){return"f"+t.reference(e)},schema:["schema"],visit:function(e){r.cached.push({}),t.visit(e,r),r.cached.pop()}}),r.data.toString=n,r.schema.toString=n,r}function i(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.inner,o=new Function("schema",t)(e);return n||(o.toString=function(){return t}),o}function s(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.inner,i=r.errorHandler,s="",a="",c="";if(t.cachedIndex&&(s="var i"+Array.apply(void 0,n(Array(t.cachedIndex))).map(function(t,e){return e+1}).join(",i")+";"),i&&(s+="var errors = [];",a="if(errors.length) return errors;"),!o&&e.context.length){var f=[],u=[];e.context.forEach(function(t,e){if("number"==typeof t)return void u.push(e+1+"=f"+t);f.push(e+1+"="+t)}),c="var f"+f.concat(u).join(",f")+";"}return c+'\n    return function f0(data){\n      "use strict";\n      '+s+"\n      "+t.lines.join("\n")+"\n      "+a+"\n    }"}t.exports={body:s,restore:i,template:o}},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof o))return new o(t);this.options=t,this.resolved={},this.state=new d(null,this),this.addFormat(t.formats)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=r(0),a=s.cleanId,c=r(2),f=c.restore,u=r(1),p=r(6),l=p.generate,d=p.State;o.prototype={validate:function(t,e){return this.resolve(t).fn(e)},addSchema:function(t,e){var r=this,n="object"===(void 0===t?"undefined":i(t))?t:e,o={schema:n,fn:l(this,n,void 0,this.options)};return[t,e.id].filter(function(t){return"string"==typeof t}).map(a).forEach(function(t){r.resolved[t]=Object.assign({name:t},o)}),o},removeSchema:function(t){t?delete this.resolved[t]:this.resolved={}},resolve:function(t){return"object"!==(void 0===t?"undefined":i(t))&&this.resolved[t]?this.resolved[t]:this.addSchema(t,this.state.resolve(t))},export:function(t){var e=this,r=void 0;return t?(r=this.resolve(t),r={name:t,schema:r.schema,fn:r.fn.toString()}):(r={},Object.keys(this.resolved).forEach(function(t){r[t]={name:t,schema:e.resolved[t].schema,fn:e.resolved[t].fn.toString()}})),JSON.stringify(r)},import:function(t){var e=this,r=JSON.parse(t),o=r;r.name&&r.fn&&r.schema&&(o=n({},r.name,r)),Object.keys(o).forEach(function(t){var r=o[t],n=r.name,i=r.schema,s=r.fn,a=f(s,i,e.options);e.resolved[n]={name:n,schema:i,fn:a}})},addFormat:function(t,e){if("string"==typeof t)return void(u[t]=e);"object"===(void 0===t?"undefined":i(t))&&Object.assign(u,t)},setErrorHandler:function(t){Object.assign(this.options,{errorHandler:t})}},t.exports=o},function(t,e,r){"use strict";t.exports=["type","not","anyOf","allOf","oneOf","$ref","$schema","id","exclusiveMaximum","exclusiveMininum","properties","patternProperties","additionalProperties","items","additionalItems","required","default","title","description","definitions","dependencies"]},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports={readOnly:"false",minimum:function(t){return"%s <"+(t.exclusiveMinimum?"=":"")+" "+t.minimum},maximum:function(t){return"%s >"+(t.exclusiveMaximum?"=":"")+" "+t.maximum},multipleOf:'($1/$2) % 1 !== 0 && typeof $1 === "number"',pattern:function(t){var e=void 0,r=void 0;return"string"==typeof t.pattern?e=t.pattern:(e=t.pattern[0],r=t.pattern[1]),'typeof ($1) === "string" && !'+new RegExp(e,r)+".test($1)"},minLength:'typeof $1 === "string" && function dltml(b,c){for(var a=0,d=b.length;a<d&&c;){var e=b.charCodeAt(a++);55296<=e&&56319>=e&&a<d&&56320!==(b.charCodeAt(a++)&64512)&&a--;c--}return!!c}($1, $2)',maxLength:'typeof $1 === "string" && function dmtml(b,c){for(var a=0,d=b.length;a<d&&0<=c;){var e=b.charCodeAt(a++);55296<=e&&56319>=e&&a<d&&56320!==(b.charCodeAt(a++)&64512)&&a--;c--}return 0>c}($1, $2)',minItems:"$1.length < $2 && Array.isArray($1)",maxItems:"$1.length > $2 && Array.isArray($1)",uniqueItems:function(t,e){return t.uniqueItems?(e(e.cache("{}")),'Array.isArray($1) && $1.some(function(item, key) {\n        if(item !== null && typeof item === "object") key = JSON.stringify(item);\n        else key = item;\n        if('+e.cache("{}")+".hasOwnProperty(key)) return true;\n        "+e.cache("{}")+"[key] = true;\n    })"):"true"},minProperties:'typeof $1 === "object" && Object.keys($1).length < $2',maxProperties:'typeof $1 === "object" && Object.keys($1).length > $2',constant:function(t,e){return JSON.stringify(t)===JSON.stringify(e)},enum:function(t,e){return t.enum.map(function(t){var r="$1",o=t;return"object"===(void 0===t?"undefined":n(t))?(o="'"+JSON.stringify(t)+"'",r=e.cache("JSON.stringify($1)")):"string"==typeof t&&(o="'"+t+"'"),r+" !== "+o}).join(" && ")}}},function(t,e,r){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];this.push(t),Object.assign(this,{current:[0],context:[],entries:new Map,env:e})}function o(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new n(e,t),o=arguments[3],i=p(r,o);i.visit(e);var s=f(i,r,o);return u(s,e,o)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=r(13),a=s.list,c=r(2),f=c.body,u=c.restore,p=c.template;n.prototype=Object.assign(Object.create(Array.prototype),{addEntry:function(t,e){if("object"!==(void 0===e?"undefined":i(e)))return e;var r={inner:!0},n=this.entries.get(e)||o(this.env,e,this,r);return this.entries.set(e,n),this.revealReference(t),this.context.push(n)},addReference:function(t,e){var r=this.indexOf(e);return-1!==r&&r!==this.length-1&&this.context.push(t)},revealReference:function(t){for(var e=this.context.indexOf(t);-1!==e;e=this.context.indexOf(t))this.context[e]=this.context.length},reference:function(t){var e=this.length,r=this.resolve(t),n=this.addReference(t,r)||this.addEntry(t,r);return e!==this.length&&(this.length=this.current.pop()),n},resolve:function(t){if("#"===t)return 0;if("string"!=typeof t)return t;var e=t.split(/#\/?/),r=e[1],n=r&&r.split("/"),o=e[0]||"#",i=void 0;for("#"===o?i=this[this.current[this.current.length-1]]:(Object.prototype.hasOwnProperty.call(this,o)||(o=this.slice(this.current[this.current.length-1]+1).map(function(t){return t.id}).join("")+o),i=this.env.resolved[o].schema),this.current.push(this.length),this.push(i);n&&n.length>0;){var s=decodeURIComponent(n[0].replace(/~1/g,"/").replace(/~0/g,"~"));if(!Object.prototype.hasOwnProperty.call(i,s))throw new Error("Schema not found");i=i[s],this.push(i),n.shift()}return i},visit:function(t,e){var r=this.length;this.push(t),a.forEach(function(r){return r(t,e)}),this.length=r}}),t.exports={State:n,generate:o}},function(t,e,r){"use strict";t.exports={null:"%s !== null",string:'typeof %s !== "string"',boolean:'typeof %s !== "boolean"',number:'typeof %s !== "number" || %s !== %s',integer:'typeof %s !== "number" || %s % 1 !== 0',object:'!%s || typeof %s !== "object" || Array.isArray(%s)',array:"!Array.isArray(%s)",date:"!(%s instanceof Date)"}},function(t,e,r){"use strict";t.exports=function(t,e){if(Object.prototype.hasOwnProperty.call(t,"$ref")){e("if ("+(e.resolve(t.$ref)+"(%s)")+") "+e.error("$ref"),e.data)}}},function(t,e,r){"use strict";t.exports=function(t,e){if(Object.prototype.hasOwnProperty.call(t,"allOf")){var r=t.allOf.map(function(t){return""+e.resolve(t)}).join("(%s) || ")+"(%s)",n=e.error("allOf");e("if ("+r+") "+n,e.data)}}},function(t,e,r){"use strict";t.exports=function(t,e){if(Object.prototype.hasOwnProperty.call(t,"anyOf")){var r=t.anyOf.map(function(t){return e.resolve(t)+"(%s)"}).join(" && "),n=e.error("anyOf");e("if ("+r+") "+n,e.data)}}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t,e){Object.prototype.hasOwnProperty.call(t,"dependencies")&&Object.keys(t.dependencies).forEach(function(r){e('if (%s.hasOwnProperty("%s")) {',e.data,r),Array.isArray(t.dependencies[r])||"string"==typeof t.dependencies[r]?[].concat(t.dependencies[r]).forEach(function(t){e('if (!%s.hasOwnProperty("%s"))',e.data,t)(e.error("dependencies"))}):"object"===n(t.dependencies[r])&&e.visit(t.dependencies[r]),e("}")})}},function(t,e,r){"use strict";var n=r(1),o=r(0),i=o.asExpression;t.exports=function(t,e){if(void 0!==t.format){var r=i(n[t.format],t,e);if(r){e("if ("+r+") "+e.error("format"),e.data)}}}},function(t,e,r){"use strict";var n=r(20),o=r(12),i=r(19),s=r(21),a=r(8),c=r(15),f=r(10),u=r(16),p=r(9),l=r(11),d=r(18),h=r(17),y=r(14);t.exports={name:{required:n,format:o,property:i,type:s,$ref:a,not:c,anyOf:f,oneOf:u,allOf:p,dependencies:l,properties:d,patternProperties:h,items:y},list:[n,o,i,s,a,c,f,u,p,l,d,h,y]}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t,e){t.items&&(Array.isArray(t.items)?(!1===t.additionalItems&&e("if (%s.length > %s)",e.data,t.items.length)(e.error("additionalItems")),t.items.forEach(function(t,r){e.data.push("["+r+"]"),e.visit(t),e.data.pop()}),"object"===n(t.additionalItems)&&(e("for ($1; $2 < $3.length; $2++) {",e.cache(t.items.length),e.cache(t.items.length),e.data),e.data.push("["+e.cache(t.items.length)+"]"),e.visit(t.additionalItems),e.data.pop(),e("}"))):(e("for ($1; $2 < $3.length; $2++) {",e.cache("0"),e.cache("0"),e.data),e.data.push("["+e.cache("0")+"]"),e.visit(t.items),e.data.pop(),e("}")))}},function(t,e,r){"use strict";t.exports=function(t,e){Object.prototype.hasOwnProperty.call(t,"not")&&e("if (!"+e.resolve(t.not)+"(%s)) "+e.error("not"),e.data)}},function(t,e,r){"use strict";t.exports=function(t,e){if(Object.prototype.hasOwnProperty.call(t,"oneOf")){var r=t.oneOf.map(function(t){return e.resolve(t)}),n=e.cache("["+r+"]"),o=e.cache("["+r+"]"),i=e.cache(o+".length - 1"),s=e.cache(o+".length - 1"),a=e.cache("0"),c=e.cache("0");e("for ($1, $3, $5; $4 >= 0 && $4 < $2.length; $4--) {",n,o,i,s,a)("if(!%s[%s](%s))",o,s,e.data)("%s++",c)("}")("if (%s !== 1)",c)(e.error("oneOf"))}}},function(t,e,r){"use strict";t.exports=function(t,e){var r=Object.prototype.hasOwnProperty.call(t,"additionalProperties")&&!0!==t.additionalProperties,n=Object.prototype.hasOwnProperty.call(t,"patternProperties");if(r||n){e("if(!Array.isArray(%s)) {",e.data),e(e.cache("null"));var o=e.cache("null"),i=function(){!1===t.additionalProperties?e(e.error("additionalProperties")):t.additionalProperties&&(e.data.push("["+o+"]"),e.visit(t.additionalProperties),e.data.pop())};e("for (%s in %s) {",o,e.data),r&&n&&e(e.cache("false")),n?Object.keys(t.patternProperties).forEach(function(n){var s=t.patternProperties[n];e("if (%s.test(%s)) {",new RegExp(n),o),r&&e(e.cache("false")+" = true;"),e.data.push("["+o+"]"),e.visit(s),e.data.pop(),e("}"),t.properties?e("if ("+(r?e.cache("false")+" || ":"")+" %s.properties.hasOwnProperty("+o+")) continue;",e.schema):r&&e("if ("+e.cache("false")+") continue;"),i()}):(t.properties&&e("if(%s.properties.hasOwnProperty("+o+")) continue;",e.schema),i()),e("}}")}}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t,e){Object.prototype.hasOwnProperty.call(t,"properties")&&"object"===n(t.properties)&&Object.keys(t.properties).forEach(function(r){var n=t.properties[r];if(Object.keys(n).length){var o=!t.required||-1===t.required.indexOf(r);o&&e('if (%s.hasOwnProperty("'+r+'")) {',e.data),e.data.push("['"+r+"']"),e.visit(n),e.data.pop(),o&&e("}")}})}},function(t,e,r){"use strict";var n=r(5),o=r(4),i=r(0),s=i.asExpression;t.exports=function(t,e){Object.keys(t).forEach(function(r){if(-1===o.indexOf(r)&&"format"!==r){var i=s(n[r],t,e);if(i){var a=e.error(r);e("if ("+i+") "+a,e.data,t[r])}}})}},function(t,e,r){"use strict";t.exports=function(t,e){Array.isArray(t.required)&&t.required.forEach(function(t){var r=e.error("required",t);e('if (!%s.hasOwnProperty("%s")) '+r,e.data,t)})}},function(t,e,r){"use strict";var n=r(7);t.exports=function(t,e){if(Object.prototype.hasOwnProperty.call(t,"type")){var r=e.error("type");e("if ("+("("+[].concat(t.type).map(function(t){return n[t]}).join(") && (")+")")+") "+r,e.data)}}},function(t,e,r){t.exports=r(3)}])});